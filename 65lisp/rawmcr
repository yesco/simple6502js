name=$1

# stty raw
# stty raw onlcuc # blocks input till return

#(cl65 -t sim6502 $name.c -o $name.sim || exit) && sim65 -c $name.sim "$@"

./rrasm parse -

stty raw -echo opost onlcr

# this works for sure, captures CTRL-C

#sim65 -c parse.sim "$@"

# seems to work without effecting interaction?
sim65 -c parse.sim "$@" | ./oric-terminal


e=$?
stty sane
echo
echo
echo
echo "Exitcode $e"


