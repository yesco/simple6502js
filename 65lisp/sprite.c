#include <string.h>
#include <assert.h>

#include "conio-raw.c"

// actual size 16 x 3
char sp6[]= { /* heigth */ 3, /* widthbytes */ 4,
  0b00111111, 0b00111111, 0b00111111,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,

  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,


  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,

  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00111111, 0b00111111, 0b00111111,  0b00000000,


  0b00000000, 0b00000000, 0000000000,  0b00000000,
  0b00000000, 0b00000000, 0000000000,  0b00000000,
  0b00000000, 0b00000000, 0000000000,  0b00000000,
  0b00000000, 0b00000000, 0000000000,  0b00000000,

  0b00000000, 0b00000000, 0000000000,  0b00000000,
  0b00000000, 0b00000000, 0000000000,  0b00000000,
  0b00000000, 0b00000000, 0000000000,  0b00000000,
  0b00000000, 0b00000000, 0000000000,  0b00000000,
};

// returns next avail char
void spritedef(char base, char* sprite) {
  char *d= CHARDEF(base);
  char *s= sprite;
  char h= *s++, w= *s++;
  char r,c,i;

  for(r=0; r<h; ++r) {
    char *x= s;
    for(c=0; c<w; ++c) {
      // copy one char
      for(i=0; i<8; ++i) {
        *d++ = *x; x+= w;
      }
      x= ++s;
    }
    s+= -4 + w*8;
  }
}

// Dummys for ./r script
int T,nil,doapply1,print;

void main() {
  char* A= SAVE "ABCD" NEXT "EFGH" NEXT "IJKL";
  clrscr();
  printf(A);
  printf(A);
  printf(A);
  cgetc();
  spritedef('A', sp6);
}
