byte arr[] =
{
  32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
  32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
  32, 2, 126, 126, 32, 32, 32, 126, 126, 126, 126, 126, 32, 32, 32, 126, 126, 126,
  126, 126, 32, 32, 32, 126, 126, 126, 126, 126, 32, 32, 32, 126, 126, 126, 126,
  126, 32, 32, 32, 126, 126, 2, 126, 126, 32, 32, 32, 126, 126, 126, 126, 126, 32,
  32, 32, 126, 126, 126, 126, 126, 32, 32, 32, 126, 126, 126, 126, 126, 32, 32,
  32, 126, 126, 126, 126, 126, 32, 32, 32, 126, 126, 5, 20, 32, 32, 32, 32, 32,
  32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
  32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 3, 20, 32, 64, 64, 64, 64,
  64, 64, 32, 32, 32, 32, 64, 64, 64, 64, 64, 64, 64, 32, 32, 32, 32, 64, 64, 64,
  64, 64, 64, 64, 64, 32, 32, 32, 32, 32, 32, 32, 32, 3, 20, 32, 64, 64, 64, 64,
  64, 64, 32, 32, 32, 32, 64, 64, 64, 64, 64, 64, 64, 32, 32, 32, 32, 64, 64, 64,
  64, 64, 64, 64, 64, 32, 32, 32, 32, 32, 32, 32, 32, 5, 20, 32, 32, 32, 32, 32,
  32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
  32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 5, 20, 32, 32, 32, 64, 64,
  64, 64, 64, 64, 64, 32, 32, 32, 32, 32, 32, 64, 64, 64, 64, 64, 64, 64, 64, 32,
  32, 32, 32, 32, 32, 64, 64, 64, 64, 64, 64, 64, 32, 5, 20, 32, 32, 32, 64, 64,
  64, 64, 64, 64, 64, 32, 32, 32, 32, 32, 32, 64, 64, 64, 64, 64, 64, 64, 64, 32,
  32, 32, 32, 32, 32, 64, 64, 64, 64, 64, 64, 64, 32, 5, 20, 32, 32, 32, 32, 32,
  32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
  32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 3, 20, 32, 100, 98, 100, 98,
  100, 98, 32, 32, 32, 32, 32, 32, 100, 98, 100, 98, 100, 98, 32, 32, 32, 32, 32,
  32, 32, 32, 100, 98, 100, 98, 100, 98, 32, 32, 32, 32, 32, 3, 20, 32, 113, 112,
  113, 112, 113, 112, 32, 32, 32, 32, 32, 32, 113, 112, 113, 112, 113, 112, 32,
  32, 32, 32, 32, 32, 32, 32, 113, 112, 113, 112, 113, 112, 32, 32, 32, 32, 32, 5,
  20, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
  32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 5,
  126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126,
  126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126,
  126, 126, 126, 126, 126, 126, 126, 5, 126, 126, 126, 126, 126, 126, 126, 126,
  126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126,
  126, 126, 42, 47, 92, 47, 126, 126, 126, 126, 126, 126, 126, 126, 126, 32, 32,
  32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
  32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 3,
  32, 32, 47, 91, 91, 93, 91, 93, 32, 32, 32, 32, 32, 32, 32, 32, 47, 91, 91, 93,
  91, 93, 32, 32, 32, 32, 32, 32, 47, 91, 91, 93, 91, 93, 32, 32, 32, 32, 32, 3,
  32, 32, 92, 91, 91, 93, 91, 93, 32, 32, 32, 32, 32, 32, 32, 32, 92, 91, 91, 93,
  91, 93, 32, 32, 32, 32, 32, 32, 92, 91, 91, 93, 91, 93, 32, 32, 32, 32, 32, 7,
  45, 45, 32, 32, 45, 45, 32, 32, 45, 45, 32, 32, 45, 45, 32, 32, 45, 45, 32, 32,
  45, 45, 32, 32, 45, 45, 32, 32, 45, 45, 32, 32, 45, 45, 32, 32, 45, 45, 32, 6,
  32, 32, 91, 93, 93, 92, 32, 32, 32, 32, 32, 32, 91, 93, 93, 92, 32, 32, 32, 32,
  32, 32, 91, 93, 93, 92, 32, 32, 32, 32, 32, 32, 91, 93, 93, 92, 32, 32, 32, 6,
  32, 32, 91, 93, 93, 47, 32, 32, 32, 32, 32, 32, 91, 93, 93, 47, 32, 32, 32, 32,
  32, 32, 91, 93, 93, 47, 32, 32, 32, 32, 32, 32, 91, 93, 93, 47, 32, 32, 32, 7,
  45, 45, 32, 32, 45, 45, 32, 32, 45, 45, 32, 32, 45, 45, 32, 32, 45, 45, 32, 32,
  45, 45, 32, 32, 45, 45, 32, 32, 45, 45, 32, 32, 45, 45, 32, 32, 45, 45, 32, 3,
  47, 91, 91, 93, 32, 32, 32, 32, 32, 47, 91, 91, 93, 91, 93, 32, 32, 32, 32, 32,
  32, 32, 47, 91, 91, 93, 32, 32, 32, 32, 47, 91, 91, 93, 32, 32, 32, 32, 32, 3,
  92, 91, 91, 93, 32, 32, 32, 32, 32, 92, 91, 91, 93, 91, 93, 32, 32, 32, 32, 32,
  32, 32, 92, 91, 91, 93, 32, 32, 32, 32, 92, 91, 91, 93, 32, 32, 32, 32, 32, 32,
  32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
  32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 2, 126,
  126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126,
  126, 126, 126, 126, 56, 56, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126,
  126, 126, 126, 126, 126, 126, 2, 126, 126, 126, 126, 126, 126, 126, 126, 126,
  126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 47, 92, 126, 126,
  126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 126, 32, 32,
  32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
  32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
};

word X()
{
  d=a; e=b; while(c) {
    *(byte*)d = *(byte*)e;
    d++; e++; --c;
  }
  return a;
}

word H() {
  v&= 0x0f;
  if (v<10) return v+'0';
  else return v-10+'A';
}

void T()
{
  a = peek(0x0304);
  b = peek(0x0305);

  v= a; poke(0xbba7-0, H());
  a >>= 4;
  v= a; poke(0xbba7-1, H());
  v= b; poke(0xbba7-2, H());
  b >>= 4;
  v= b; poke(0xbba7-3, H());

  poke(0x0305,0xff);
  poke(0x0304,0xff);
}

void L()
{
  b = a + 40;
  c = peek(a);
  d = peek(b);
  for(i = 1; i < 37; ++i)
  {
    poke(a, peek(a + 1));
    poke(b, peek(b + 1));
    ++a;
    ++b;
  }
  poke(a, c);
  poke(b, d);
}

void R()
{
  b = a + 40;
  c = peek(a);
  d = peek(b);
  for(i = 1; i < 37; ++i)
  {
    poke(a, peek(a - 1));
    poke(b, peek(b - 1));
    --a;
    --b;
  }
  poke(a, c);
  poke(b, c);
}

word main()
{
  poke(0x0400,0x78);
  poke(0x0401,0x60);

  asm("sei");

  poke(0x0307,0xff);
  poke(0x0306,0xff);

  a= (void*)0xbb80; b= arr; c= sizeof(arr); X();

  r = 0;
  while(!r)
  {
    a= 0xbb82 + 160; L();
    a= 0xbb82 + 400; L();
    a= 0xbb82 + 640; L();
    a= 0xbb82 + 880; L();

    a= 0xbb80 + 39 + 280; R();
    a= 0xbb80 + 39 + 760; R();

    T();
  }

  return 0;
}
