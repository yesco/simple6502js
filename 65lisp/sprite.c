#include <string.h>
#include <assert.h>

#include "conio-raw.c"

long spHi[]= { 
  //0123456789abcdef0123456789abcdef
  //  123456123456123456123456123456
  0b11111111111111111111111111111111,
  0b10000000000000000000000000000001,
  0b10001000000010000000000000000001,
  0b10001000000010000000000000000001,
  0b10001000000010000000000000000001,
  0b10001111111110000000001000000001,
  0b10001000000010000000001000000001,
  0b10001000000010000000001000000001,
  0b10001000000010000000001000000001,
  0b10001000000010000000001000000001,
  0b10000000000000000000001000000001,
  0b10000000000000000000001000000001,
  0b10000000000000000000001000000001,
  0b10000000000000000000000000000001,
  0b10000000000000000000000000000001,
  0b11111111111111111111111111111111,
};

// actual size 16 x 3
char sp6[]= { /* heigth */ 3, /* widthbytes */ 4,
  0b00111111, 0b00111111, 0b00111111,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,

  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,


  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,

  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00100000, 0b00000000, 0000000001,  0b00000000,
  0b00111111, 0b00111111, 0b00111111,  0b00000000,


  0b00000000, 0b00000000, 0000000000,  0b00000000,
  0b00000000, 0b00000000, 0000000000,  0b00000000,
  0b00000000, 0b00000000, 0000000000,  0b00000000,
  0b00000000, 0b00000000, 0000000000,  0b00000000,

  0b00000000, 0b00000000, 0000000000,  0b00000000,
  0b00000000, 0b00000000, 0000000000,  0b00000000,
  0b00000000, 0b00000000, 0000000000,  0b00000000,
  0b00000000, 0b00000000, 0000000000,  0b00000000,
};

long x= 0b00000100000000110000001000000001;
long y= 0x04030201;

// ADGj  "XXX "
// BEHk  "    "
// cfil  "    "
void spritedef(char base, char* sprite) {
  char *d= CHARDEF(base);
  char *s= sprite;
  char h= *s++, w= *s++;
  char r,c,i;

  for(r=0; r<h; ++r) {
    char *x= s;
    for(c=0; c<w; ++c) {
      // copy one char
      for(i=0; i<8; ++i) {
        *d++ = *x; x+= w;
      }
      x= ++s;
    }
    s+= -4 + w*8;
  }
}

// Dummys for ./r script
int T,nil,doapply1,print;

void main() {
  char* A= SAVE "ABCD" NEXT "EFGH" NEXT "IJKL";
  clrscr();
  printf("long= %ld %08lx\n", x, x);
  printf("long= %ld %08lx\n", y, y);
  printf(A);
  printf(A);
  printf(A);
  cgetc();
  spritedef('A', sp6);
}
